# Feature 3: Страница логирования (Login Page)

## Описание

Реализация страницы входа в систему с формой аутентификации, валидацией и обработкой состояний.

## Контекст

### Технологический стек
- **React 18** с TypeScript
- **MUI v5** для UI компонентов
- **React Router v6** для роутинга
- **Redux Toolkit** для управления состоянием

### Существующий код (из feat_2)
- `authApi` - RTK Query endpoints для login/register
- `authSlice` - Redux slice с `setCredentials` и `logout`
- `useLogin` hook - бизнес-логика входа
- Типы: `LoginDto`, `User`, `AuthState`

### Архитектура (из documents_hub)
- Страницы располагаются в `src/pages/`
- Используется FSD (Feature-Sliced Design)
- Protected routes через компонент `ProtectedRoute`
- Навигация через `react-router-dom`

## Декомпозиция

### Sub-task 1: Создание UI компонента LoginPage
- Создать `src/pages/login/LoginPage.tsx`
- Форма с email и password полями
- Валидация полей (required, email format)
- Состояния: loading, error

### Sub-task 2: Настройка роутинга
- Добавить маршрут `/login` в router
- Создать компонент `ProtectedRoute` (если ещё нет)
- Настроить редирект на главную страницу после успешного входа

### Sub-task 3: Интеграция с бизнес-логикой
- Подключить `useLogin` hook
- Обработка успешного входа - редирект
- Обработка ошибок - отображение на UI
- Сохранение токена в localStorage

## Оценка сложности: Medium

## Требования к тестам (TDD)

Каждый sub_task содержит секцию "Подготовка тесткейсов для TDD" с конкретными тесткейсами.

### sub_task_1: Unit тесты LoginPage
- Рендер формы (email, password поля)
- Рендер кнопки
- Валидация (empty, invalid email)
- Состояния (loading, error)
- Минимум 5 тестов

### sub_task_2: Unit тесты ProtectedRoute
- Редирект неавторизованного пользователя
- Рендер дочернего маршрута для авторизованного
- Интеграционные тесты роутера
- Минимум 5 тестов

### sub_task_3: Integration тесты
- Успешный login -> navigate('/')
- Ошибка login -> отображение Alert
- Loading state
- Вызов login API с правильными данными
- Минимум 4 теста

**Всего тестов:** ~14+ unit/integration тестов

### E2E тесты (Playwright)

Для данной фичи требуется создать E2E тесты в директории `frontend/e2e/`:

- `e2e/auth/login.spec.ts` - полный сценарий входа в систему
- Использовать Playwright для тестирования в реальном браузере

**Сценарии E2E тестов:**
1. Успешный вход - редирект на главную страницу
2. Ошибка при неверных учетных данных
3. Валидация пустых полей
4. Проверка ProtectedRoute - редирект неавторизованного пользователя

## Зависимости
- feat_2 (auth API, slice, hooks) - должно быть выполнено

## Критерии приёмки
1. Страница `/login` отображает форму входа
2. Валидация email и password работает корректно
3. При успешном входе - редирект на главную страницу
4. При ошибке - отображение сообщения об ошибке
5. Во время загрузки - отображение индикатора загрузки
