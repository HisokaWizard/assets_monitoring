# AGENTS.md ‚Äî –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–≥–ª–∞–º–µ–Ω—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–≠—Ç–æ—Ç —Ñ–∞–π–ª –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –æ–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞. –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Å–ª–æ–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:

## –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≥–µ–Ω—Ç–∞ —Ç–æ–ª—å–∫–æ –≤ –ø–∞–ø–∫–µ ./.opencode

## –í—Å–µ –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑–º–µ—â–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ ./.opencode

- **Backend (NestJS)**: –°–º. `./opencode/BACKEND.md`
- **Frontend (React)**: –°–º. `./opencode/FRONTEND.md`

## üéØ –û–±–∑–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤ –∏ NFT —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –∏ –æ—Ç—á–µ—Ç–∞–º–∏.

### –ö–ª—é—á–µ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω (CoinMarketCap –¥–ª—è –∫—Ä–∏–ø—Ç–æ, OpenSea –¥–ª—è NFT) –∫–∞–∂–¥—ã–µ 4 —á–∞—Å–∞.
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (2‚Äì12 —á–∞—Å–æ–≤) –∏ –ø–æ—Ä–æ–≥–æ–≤ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –∞–ª–µ—Ä—Ç–æ–≤.
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: Email-–∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ % –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã.
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ (–¥–µ–Ω—å, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü, –∫–≤–∞—Ä—Ç–∞–ª, –≥–æ–¥) –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (—Ä–æ–ª–∏: `user`, `admin`).

---

## üíº –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∞–º–∏

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–∞ (–∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞ –∏–ª–∏ NFT) –≤ –ø–æ—Ä—Ç—Ñ–µ–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º–∞:

1. –û–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–µ API.
2. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç % –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–µ.
3. –õ–æ–≥–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤.

### 2. –õ–æ–≥–∏–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ê–ª–µ—Ä—Ç—ã —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –Ω–∞ –±–∞–∑–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

- **–ü–æ—Ä–æ–≥ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: –ù–∞–ø—Ä–∏–º–µ—Ä, —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–∫–∞—á–∫–µ > 5%.
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –ø–∏—Å–µ–º (—Ä–∞–∑ –≤ 2-12 —á–∞—Å–æ–≤), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–ø–∞–º–∞.

### 3. –ê–ª–≥–æ—Ä–∏—Ç–º –æ—Ç—á–µ—Ç–æ–≤

–û—Ç—á–µ—Ç—ã (Daily, Weekly, Monthly, Quarterly, Yearly) —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –¥–µ–ª—å—Ç–∞ –º–µ–∂–¥—É —Ü–µ–Ω–æ–π –Ω–∞ –Ω–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞ –∏ —Ç–µ–∫—É—â–µ–π —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω–æ–π. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–ª—è –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

---

## üõ† –û–±—â–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1.  **–Ø–∑—ã–∫**: TypeScript 5+ (—Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è `strict: true`).
2.  **–°—Ç–∏–ª—å –∫–æ–¥–∞**: 2 –ø—Ä–æ–±–µ–ª–∞, –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏, —Ç–æ—á–∫–∏ —Å –∑–∞–ø—è—Ç–æ–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã.
3.  **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π JSDoc –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ –∫–ª–∞—Å—Å–æ–≤.
4.  **–ö–æ–º–º–∏—Ç—ã**: –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∏–ª–∏ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (—Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∞–≤–∏–ª–∞–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è).

---

## üìã –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏

–ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –≤ `.opencode/features/`. –≠—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–≤—ã–π —à–∞–≥ –¥–ª—è –ª—é–±–æ–π —Ñ–∏—á–∏, –±–∞–≥–∞ –∏–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á

```
.opencode/features/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ feat_1/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feature_1.md          # –ü–ª–∞–Ω –∏ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sub_task_1.md         # –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–¥–∞—á–∞ 1
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sub_task_2.md         # –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–¥–∞—á–∞ 2
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ STATUS.md             # –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ feat_2/
‚îÇ   ‚îî‚îÄ‚îÄ feat_N/
‚îî‚îÄ‚îÄ frontend/
    ‚îú‚îÄ‚îÄ feat_1/
    ‚îî‚îÄ‚îÄ feat_N/
```

**–ù—É–º–µ—Ä–∞—Ü–∏—è:** –ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è –¥–ª—è backend –∏ frontend (feat_1, feat_2... –±–µ–∑ –≤–µ–¥—É—â–∏—Ö –Ω—É–ª–µ–π). –ú–∞–∫—Å–∏–º—É–º 5 sub-tasks –Ω–∞ –∑–∞–¥–∞—á—É.

### –ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏

**–®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –∑–∞–¥–∞—á–∏**
–ù–∞–π—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –Ω–æ–º–µ—Ä –≤ `./opencode/features/{backend|frontend}/` –∏ —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `feat_{N+1}`.

**–®–∞–≥ 2: –°–±–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)**
–ü–µ—Ä–µ–¥ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tool `contextDocs` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –≥–∞–π–¥–ª–∞–π–Ω–æ–≤:
```typescript
[context_docs: {"layer": "backend", "topic": "ARCHITECTURE"}]
[context_docs: {"layer": "backend", "search": "relevant_keyword"}]
```

**–®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ feature_{N}.md**
–°–æ–∑–¥–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å:
- –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- –ö–æ–Ω—Ç–µ–∫—Å—Ç (–ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ contextDocs)
- –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–∞ 3-5 –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ sub_task_{1-5}.md**
–î–ª—è –∫–∞–∂–¥–æ–π –∞—Ç–æ–º–∞—Ä–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å:
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- –°–ø–æ—Å–æ–± —Ä–µ—à–µ–Ω–∏—è (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º contextDocs)
- –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

**–®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ STATUS.md**
–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å—Ç–∞—Ç—É—Å–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "to do".

**–®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞**
–ü—Ä–∏ –Ω–∞—á–∞–ª–µ —Ä–∞–±–æ—Ç—ã –æ–±–Ω–æ–≤–∏—Ç—å STATUS.md –Ω–∞ "in progress" –∏ –Ω–∞—á–∞—Ç—å —Å sub_task_1.md.

**–®–∞–≥ 7: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ**
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö sub-tasks –æ–±–Ω–æ–≤–∏—Ç—å STATUS.md –Ω–∞ "done".

### –§–æ—Ä–º–∞—Ç STATUS.md

```markdown
# Status: feat_{N}

- **Current:** to do | in progress | done | closed
- **Started:** YYYY-MM-DD HH:MM
- **Completed:** YYYY-MM-DD HH:MM (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
- **Current Sub-task:** sub_task_1.md

## –ü—Ä–æ–≥—Ä–µ—Å—Å
- [ ] sub_task_1.md
- [ ] sub_task_2.md
- [ ] sub_task_3.md
```

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏

1. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:** Backend –∏ frontend –∏–º–µ—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—É—é –Ω—É–º–µ—Ä–∞—Ü–∏—é
2. **–ù–µ–∏–∑–º–µ–Ω–Ω–æ—Å—Ç—å:** Sub-tasks –Ω–µ –º–µ–Ω—è—é—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã. –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞
3. **–ú–∞–∫—Å–∏–º—É–º:** –ù–µ –±–æ–ª–µ–µ 5 sub-tasks –Ω–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É
4. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ `.opencode/features/`
5. **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `contextDocs` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
6. **–°—Ç–∞—Ç—É—Å:** STATUS.md –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

---

## üß© –ö–æ–Ω—Ü–µ–ø—Ü–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: TDD (Test-Driven Development)

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –º—ã –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–µ–º—Å—è –ø–∞—Ä–∞–¥–∏–≥–º—ã TDD, –ø–æ–ø—É–ª—è—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ö–µ–Ω—Ç–æ–º –ë–µ–∫–æ–º. –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∏–Ω–≤–µ—Ä—Å–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞: –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∂–µ–ª–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≤ –≤–∏–¥–µ —Ç–µ—Å—Ç–∞ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –ø–∏—à–µ–º —Å–∞–º—É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç 100% –ø–æ–∫—Ä—ã—Ç–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —Ç–µ—Å—Ç–∞–º–∏ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞ (¬´You Ain't Gonna Need It¬ª ‚Äî YAGNI).

### üöÄ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ—à–µ–Ω–∏—è –ª—é–±–æ–π –∑–∞–¥–∞—á–∏

–õ—é–±–∞—è –∑–∞–¥–∞—á–∞ (—Ñ–∏—á–∞, –±–∞–≥, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥) –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Å–ª–µ–¥—É—é—â–∏–π —Ü–∏–∫–ª:

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç:**
–°–Ω–∞—á–∞–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–æ–Ω—è—Ç–Ω—ã:

- –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ,
- –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç,
- –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–ª–∏–º–∏—Ç—ã API, —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ç.–¥.).

**–°–∫–µ–ª–µ—Ç —Ä–µ—à–µ–Ω–∏—è:**
–û–ø–∏—à–∏ —Å–ª–æ–≤–∞–º–∏ –∏–ª–∏ –ø—Å–µ–≤–¥–æ–∫–æ–¥–æ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–ª–∞–Ω:

- –ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã?
- –ù—É–∂–Ω—ã –ª–∏ –Ω–æ–≤—ã–µ DTO, Entity –∏–ª–∏ Redux-—Å–ª–∞–π—Å—ã?

#### 2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–¶–∏–∫–ª Red ‚Üí Green ‚Üí Refactor)

**–®–∞–≥ A: TDD Testing (RED)**

–ù–∞–ø–∏—à–∏ –º–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç (unit test), –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

–ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç:

```bash
npm test -- –∏–º—è-—Ñ–∞–π–ª–∞.spec.ts
```

–û–Ω –¥–æ–ª–∂–µ–Ω —É–ø–∞—Å—Ç—å (–æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏–ª–∏ –ø—Ä–æ–≤–∞–ª assertion).
–≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ —Ç–µ—Å—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∏—á–∏ –∏ –Ω–µ –¥–∞—ë—Ç –ª–æ–∂–Ω–æ–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

**–®–∞–≥ B: –ü–∏—à–µ–º –∫–æ–¥ (GREEN)**

–ù–∞–ø–∏—à–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã–π –æ–±—ä—ë–º –∫–æ–¥–∞, —á—Ç–æ–±—ã —Ç–µ—Å—Ç –ø—Ä–æ—à—ë–ª.

–ù–µ —Å—Ç–∞—Ä–∞–π—Å—è —Å—Ä–∞–∑—É —Å–¥–µ–ª–∞—Ç—å ¬´–∫—Ä–∞—Å–∏–≤–æ¬ª –∏–ª–∏ ¬´—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ¬ª. –¢–≤–æ—è —Ü–µ–ª—å –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ ‚Äî –∑–µ–ª—ë–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤.

**–®–∞–≥ C: –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–æ–¥**

–ó–∞–ø—É—Å—Ç–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –≤ –º–æ–¥—É–ª–µ:

```bash
npm test
```

–£–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —Å–ª–æ–º–∞–ª–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (—Ä–µ–≥—Ä–µ—Å—Å–∏—è).

**–®–∞–≥ D: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (REFACTOR)**

–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –∫–æ–¥:

- —É–±–µ—Ä–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ,
- —É–ª—É—á—à–∏ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ,
- –≤—ã–Ω–µ—Å–∏ –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

**–í–∞–∂–Ω–æ:** –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∑–µ–ª—ë–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.

**–õ–∏–º–∏—Ç:** –ù–µ –±–æ–ª–µ–µ 3 –∏—Ç–µ—Ä–∞—Ü–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å over-engineering. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∑–µ–ª—ë–Ω—ã–º–∏.

---

# OpenCode Environment

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
.opencode/
‚îú‚îÄ‚îÄ opencode.json          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–∞–≤
‚îú‚îÄ‚îÄ AGENTS.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ tools/                # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ cryptoPrice.ts    # –ü—Ä–∏–º–µ—Ä: –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω –∫—Ä–∏–ø—Ç–æ
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ skills/               # Agent Skills
‚îÇ   ‚îú‚îÄ‚îÄ backend-dev/      # Backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SKILL.md
‚îÇ   ‚îú‚îÄ‚îÄ frontend-dev/     # Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SKILL.md
‚îÇ   ‚îî‚îÄ‚îÄ tdd-workflow/     # TDD –ø–æ–¥—Ö–æ–¥
‚îÇ       ‚îî‚îÄ‚îÄ SKILL.md
‚îú‚îÄ‚îÄ agents/               # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ (agent configs)
‚îî‚îÄ‚îÄ plugins/              # –ü–ª–∞–≥–∏–Ω—ã
    ‚îî‚îÄ‚îÄ (plugin files)
```

## –ê–≥–µ–Ω—Ç—ã

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ

- **Build** ‚Äî —Ä–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
- **Plan** ‚Äî —Ä–µ–∂–∏–º –∞–Ω–∞–ª–∏–∑–∞, —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ

- **Architect** ‚Äî –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
- **Reviewer** ‚Äî code review, –ø–æ–∏—Å–∫ –±–∞–≥–æ–≤

## –°–≤—è–∑—å Tools ‚Üî Skills ‚Üî Agents

```mermaid
graph TB
    subgraph "Tools"
        T1[cryptoPrice]
        T2[databaseQuery]
        T3[apiClient]
    end

    subgraph "Skills"
        S1[backend-dev]
        S2[frontend-dev]
        S3[tdd-workflow]
    end

    subgraph "Agents"
        A1[Build]
        A2[Plan]
        A3[Architect]
    end

    T1 -->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| A1
    T2 -->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| A1
    S1 -->|–æ–±—É—á–∞–µ—Ç| A1
    S2 -->|–æ–±—É—á–∞–µ—Ç| A2
    S3 -->|–æ–±—É—á–∞–µ—Ç| A3
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **Tools** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã, –≤—ã–∑—ã–≤–∞—Ç—å API)
2. **Skills** –æ–±—É—á–∞—é—Ç –∞–≥–µ–Ω—Ç–æ–≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
3. **Agents** –∫–æ–º–±–∏–Ω–∏—Ä—É—é—Ç tools –∏ –∑–Ω–∞–Ω–∏—è –∏–∑ skills –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –î–æ–±–∞–≤–∏—Ç—å Tool

1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.opencode/tools/myTool.ts`
2. –û–ø–∏—Å–∞—Ç—å tool —Å –ø–æ–º–æ—â—å—é `@opencode-ai/plugin`
3. OpenCode –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

### –î–æ–±–∞–≤–∏—Ç—å Skill

1. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `.opencode/skills/my-skill/`
2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `SKILL.md` —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
3. –ê–≥–µ–Ω—Ç —Å–º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å skill –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

### –î–æ–±–∞–≤–∏—Ç—å Agent

1. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `.opencode/opencode.json` –≤ —Å–µ–∫—Ü–∏—é `agent`
2. –£–∫–∞–∑–∞—Ç—å —Ä–µ–∂–∏–º (plan/build) –∏ –ø—Ä–∞–≤–∞
3. –ù–∞–ø–∏—Å–∞—Ç—å system prompt

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `opencode.json`:

- `model` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è LLM –º–æ–¥–µ–ª—å
- `permission` ‚Äî –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ tools
- `agent` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤
- `mcp` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
- `rules` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞:**
   ```
   /mode plan
   –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É backend
   ```

2. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
   ```
   /mode build
   –†–µ–∞–ª–∏–∑—É–π –Ω–æ–≤—ã–π endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω –∞–∫—Ç–∏–≤–æ–≤
   ```

3. **Code Review:**
   ```
   /agent reviewer
   –ü—Ä–æ–≤–µ—Ä—å —ç—Ç–æ—Ç PR –Ω–∞ –±–∞–≥–∏
   ```

4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Skills:**
   ```
   –ó–∞–≥—Ä—É–∑–∏ skill tdd-workflow
   –ù–∞–ø–∏—à–∏ —Ç–µ—Å—Ç—ã –¥–ª—è —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
   ```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

–°–æ–∑–¥–∞–≤–∞–π—Ç–µ tools –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–∞—à–∏–º–∏ API, skills –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥—Ö–æ–¥–æ–≤ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Tool Registry –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∞–≥–µ–Ω—Ç–∞–º.

## –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–µ—Ä–≤–∏—Å–∞ –±—ç–∫–µ–Ω–¥–∞

```mermaid
graph TD
    subgraph "–í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã"
        CMC[CoinMarketCap API]
        OS[OpenSea API]
        SMTP[Yandex SMTP]
    end

    subgraph "NestJS Application"
        subgraph "Modules"
            AM[AssetsModule]
            AuthM[AuthModule]
            NM[NotificationsModule]
        end

        subgraph "Services"
            SS[SchedulerService]
            AUS[AssetUpdateService]
            NS[NotificationService]
            AS[AssetsService]
            AuthS[AuthService]
            ES[EmailService]
        end

        subgraph "Controllers"
            AC[AssetsController]
            AuthC[AuthController]
            NC[NotificationsController]
        end
    end

    subgraph "Database (SQLite)"
        subgraph "Tables"
            U[User<br/>id, email, password, role, lastUpdated]
            A[Asset<br/>id, amount, middlePrice, userId, type<br/>+ CryptoAsset: symbol, currentPrice<br/>+ NFTAsset: collectionName, floorPrice]
            HP[HistoricalPrice<br/>assetId, price, timestamp, source]
            NS[NotificationSettings<br/>userId, assetType, enabled, thresholdPercent,<br/>intervalHours, lastNotified]
            NL[NotificationLog<br/>userId, type, subject, message, sentAt, status]
        end
    end

    %% –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã
    SS -->|–ö–∞–∂–¥—ã–µ 4 —á–∞—Å–∞| AUS
    AUS -->|–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω| CMC
    AUS -->|–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ floor price| OS
    AUS -->|–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏| HP
    AUS -->|–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è| NS
    NS -->|–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤| NS
    NS -->|–û—Ç–ø—Ä–∞–≤–∫–∞ email| ES
    ES -->|SMTP| SMTP
    NS -->|–õ–æ–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π| NL

    SS -->|–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ| NS
    SS -->|–ï–∂–µ–º–µ—Å—è—á–Ω–æ| NS
    NS -->|–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤| NS

    %% –°–≤—è–∑–∏ —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏
    AC --> AS
    AC --> AUS
    AuthC --> AuthS
    NC --> NS

    %% –°–≤—è–∑–∏ —Å –ë–î
    AS --> A
    AUS --> A
    AUS --> HP
    NS --> NS
    NS --> NL
    AuthS --> U

    %% –°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
    AM --> AUS
    AM --> AS
    AuthM --> AuthS
    NM --> SS
    NM --> NS
    NM --> ES
```
