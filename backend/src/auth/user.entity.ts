/**
 * @fileoverview Сущность пользователя для базы данных.
 *
 * Этот файл определяет модель данных для пользователей системы аутентификации.
 * Сущность представляет таблицу пользователей с полями для email, пароля и роли.
 *
 * Используется для регистрации, входа в систему и управления доступом.
 */

import { Entity, Column, PrimaryGeneratedColumn } from 'typeorm';

/**
 * Сущность пользователя.
 *
 * Определяет структуру таблицы пользователей в базе данных.
 * Содержит информацию, необходимую для аутентификации и авторизации.
 *
 * @Entity декоратор указывает, что класс соответствует таблице в БД.
 */
@Entity()
export class User {
  /**
   * Уникальный идентификатор пользователя.
   *
   * Автоинкрементный первичный ключ.
   */
  @PrimaryGeneratedColumn()
  id: number;

  /**
   * Email пользователя.
   *
   * Должен быть уникальным в системе.
   * @Column({ unique: true }) обеспечивает уникальность на уровне базы данных.
   */
  @Column({ unique: true })
  email: string;

  /**
   * Хэшированный пароль пользователя.
   *
   * Хранится в зашифрованном виде для безопасности.
   */
  @Column()
  password: string;

  /**
   * Роль пользователя в системе.
   *
   * Определяет уровень доступа (например, "user", "admin").
   * Используется для авторизации и контроля доступа к ресурсам.
   */
  @Column()
  role: string; // e.g., user, admin

  /**
   * Время последнего обновления активов.
   */
  @Column({ type: 'datetime', nullable: true })
  lastUpdated: Date;
}
